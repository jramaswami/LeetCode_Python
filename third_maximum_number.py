"""
LeetCode :: Array Module :: Third Maximum Number
jramaswami
"""


import heapq


class Solution:
    def thirdMax(self, nums):
        if len(nums) < 3:
            return max(nums)

        H = []

        for n in nums:
            if n not in H:
                heapq.heappush(H, n)
            print(n, H)
            while len(H) > 3:
                heapq.heappop(H)
        return H[0]


def test_1():
    nums = [3, 2, 1]
    assert Solution().thirdMax(nums) == 1


def test_2():
    nums = [1, 2]
    assert Solution().thirdMax(nums) == 2


def test_3():
    nums = [2, 2, 3, 1]
    assert Solution().thirdMax(nums) == 1


def test_4():
    nums = [1425950408, -1433790786, -1959001187, 1840397831, 210865303, -1426368057, -1713797349, -878881750, 253278140, -1143865859, -295150568, 1430114772, 144625570, -1171552227, -526351811, 1722287497, 1138991198, 253225876, 98912032, 1698811646, 1081925062, 1273902806, -40651093, 112573920, 1710259107, -777387167, -1027907928, 1612284314, 61388815, 1778878293, -1691396986, -1720290285, 1920477663, 539688353, 1490314587, -1382723467, -261209231, -1712611249, -1886022281, -1983332708, -321849280, -1145047319, 120430178, 1801050503, 71937952, -189087264, -1232592837, 516584306, 275790599, -1620724143, 704256021, -844444076, 1155200324, 1304854457, -22206669, 1748082925, -1541381971, -2114388275, 1238856445, 808529199, 57134753, -197494617, -293957380, -1897014830, 337561738, 273554550, -1339979031, -1891497990, 882039991, -741663902, 1127429524, -1643713038, -411844717, 129503356, -145463295, 1692383370, 1440909938, -392814349, -1807987821, 1861017916, -1243420808, 309116550, 1332797466, 1827047834, 1857163217, 232228809, -2095214699, -233221962, -1467862945, -1364569534, 2106077943, -1136278934, -1719076258, -2070659807, 371584726, -207387607, 1490193145, -1541646110, -830775563, -561626615]
    print(sorted(nums, reverse=True))
    assert Solution().thirdMax(nums) == 1861017916


def test_5():
    """WA"""
    nums = [1,1,2]
    assert Solution().thirdMax(nums) == 2
